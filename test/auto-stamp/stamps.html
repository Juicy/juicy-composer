<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

    <script src="../../../webcomponentsjs/webcomponents.js"></script>
    <script src="../../../web-component-tester/browser.js"></script>

    <link rel="import" href="../../juicy-composer.html">
</head>

<body>
    <test-fixture id="no-auto-stamp">
        <template>
            <juicy-composer>
                <div>0</div>
            </juicy-composer>
        </template>
    </test-fixture>
    <test-fixture id="with-auto-stamp">
        <template>
            <juicy-composer auto-stamp>
                <div>0</div>
            </juicy-composer>
        </template>
    </test-fixture>
</body>
<script>

    var juicyElement;
    describe('juicy-composer', function () {
        var stamp;

        before(function () {
            var el = document.createElement('juicy-composer');
            stamp = sinon.spy(el.constructor.prototype, 'stamp');
        });
        afterEach(function () {
            stamp.reset();
        });
        describe('with no auto-stamp given', function () {
            beforeEach(function () {
                juicyElement = fixture('no-auto-stamp');
            });
            it('once element is created, should NOT call stamp method', function () {
                expect(stamp).not.to.have.been.called;
            });
        });
        describe('with `auto-stamp` attribute given', function () {
            beforeEach(function () {
                juicyElement = fixture('with-auto-stamp');
            });
            it('once element is created, should call stamp method', function () {
                expect(stamp).to.have.been.calledOnce;
            });
        });
    });
</script>

</html>
